<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Arnav Gowda | Portfolio</title>
  <!-- Tailwind CSS via CDN with dark mode enabled -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // configure tailwind theme for accent color (blue) and dark mode
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            accent: {
              DEFAULT: '#2563eb', // blue accent
              light: '#3b82f6',
              dark: '#1e40af'
            }
          }
        }
      }
    };
  </script>
    <!-- Define CSS variables for accent colors -->
    <style>
      :root {
        --accent: #2563eb;
        --accent-light: #3b82f6;
        --accent-dark: #1e40af;
      }
    </style>
  <!-- Use root-level UMD logo for favicon on GitHub Pages -->
  <link rel="icon" href="/umd.png" />
  <!-- We draw our own lightweight charts; no external chart library required -->
  <!-- Simple Markdown Icons (Lucide) -->
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans antialiased">
  <!-- Navigation Bar -->
  <header class="fixed top-0 w-full z-20 backdrop-blur bg-white/80 dark:bg-gray-900/80 shadow-sm">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
      <h1 class="font-bold text-xl text-accent-DEFAULT">Arnav Gowda</h1>
      <nav class="hidden md:flex space-x-6">
        <a href="#home" class="hover:text-accent-light transition-colors">Home</a>
        <a href="#about" class="hover:text-accent-light transition-colors">About</a>
        <a href="#education" class="hover:text-accent-light transition-colors">Education</a>
        <a href="#experience" class="hover:text-accent-light transition-colors">Experience</a>
        <a href="#projects" class="hover:text-accent-light transition-colors">Projects</a>
        <a href="#skills" class="hover:text-accent-light transition-colors">Skills</a>
        <a href="resume.html" class="hover:text-accent-light transition-colors">Resume</a>
        <!-- Contact link removed -->
      </nav>
      <!-- Mobile menu button -->
      <button id="menuBtn" class="md:hidden text-accent-DEFAULT focus:outline-none">
        <svg id="menuIcon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
      </button>
      <!-- Dark mode toggle -->
      <button id="themeToggle" class="ml-4 text-accent-DEFAULT focus:outline-none">
        <svg id="themeIcon" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m8.485-12.485l-.707.707M4.222 19.778l-.707.707M21 12h-1M4 12H3m15.071 7.071l-.707-.707M5.636 5.636l-.707-.707" /></svg>
      </button>
    </div>
    <!-- Mobile menu -->
    <div id="mobileMenu" class="md:hidden hidden px-4 pb-4 space-y-2 bg-white dark:bg-gray-900">
      <a href="#home" class="block" onclick="toggleMenu()">Home</a>
      <a href="#about" class="block" onclick="toggleMenu()">About</a>
      <a href="#education" class="block" onclick="toggleMenu()">Education</a>
      <a href="#experience" class="block" onclick="toggleMenu()">Experience</a>
      <a href="#projects" class="block" onclick="toggleMenu()">Projects</a>
      <a href="#skills" class="block" onclick="toggleMenu()">Skills</a>
      <a href="resume.html" class="block">Resume</a>
      <!-- Contact link removed -->
    </div>
  </header>

  <!-- Main content -->
  <main class="pt-24 max-w-6xl mx-auto px-4 space-y-32">
    <!-- Home Section -->
    <section id="home" class="pt-12">
      <div class="grid md:grid-cols-2 gap-8 items-start">
        <!-- Hero text -->
        <div class="space-y-4">
          <!-- Primary headline summarising my majors and focus area -->
          <h2 class="text-4xl md:text-5xl font-extrabold leading-tight">
            CS&nbsp;&amp;&nbsp;Mathematics&nbsp;|&nbsp;Quantitative Research
          </h2>
          <!-- Three concise bullets highlighting my studies, research and interests.
               Recruiters can quickly scan these lines to understand my academic focus,
               current research directions and the types of projects I build. -->
          <ul class="space-y-1 text-base md:text-lg list-disc pl-5">
            <li>🎓 Junior at the University of Maryland (Class&nbsp;of&nbsp;2025) studying CS &amp; Applied&nbsp;Mathematics</li>
            <li>🔬 Currently researching topological data analysis &amp; geometric deep learning to detect regime shifts in high‑frequency financial markets</li>
            <li>🛠️ Building scalable systems in quantitative finance, logistics optimisation &amp; AI‑driven applications</li>
          </ul>
          <div class="flex flex-wrap gap-4 pt-4">
            <!-- Call-to-action buttons: Projects, GitHub and LinkedIn.  The projects button scrolls to the projects section. -->
            <a href="https://github.com/halli75" target="_blank" class="px-4 py-2 rounded-lg border border-accent-DEFAULT text-accent-DEFAULT hover:bg-accent-DEFAULT hover:text-white transition-colors">GitHub</a>
            <a href="https://www.linkedin.com/in/arnav-gowda-86b835217/" target="_blank" class="px-4 py-2 rounded-lg border border-accent-DEFAULT text-accent-DEFAULT hover:bg-accent-DEFAULT hover:text-white transition-colors">LinkedIn</a>
          </div>
        </div>
        <!-- Snapshot card rewritten with a decorative illustration and richer description -->
        <div class="p-6 rounded-lg shadow-md bg-gradient-to-br from-accent-DEFAULT/25 via-accent-DEFAULT/15 to-transparent dark:from-accent-dark/30 dark:via-accent-dark/20 dark:to-transparent">
          <!-- Snapshot header with a sparkle icon to hint at creativity -->
          <h3 class="text-xl font-semibold mb-2 flex items-center gap-2">
            <span data-lucide="sparkles" class="w-5 h-5"></span>
            Snapshot
          </h3>
          <!-- Creative tagline capturing my cross‑disciplinary spirit -->
          <p class="text-sm mb-2">Quant research meets creative problem solving — bridging math, markets and games.</p>
          <!-- Short description emphasising how I blend my core domains -->
          <p class="text-xs text-gray-700 dark:text-gray-300 mb-3">Blending TDA, geometric&nbsp;DL &amp; full‑stack skills to uncover hidden structures and build high‑impact systems.</p>
          <!-- Domain badges with icons -->
          <div class="flex flex-wrap gap-2 mb-3">
            <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-xs flex items-center gap-1">
              <span data-lucide="activity" class="w-4 h-4"></span><span>Research</span>
            </span>
            <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-xs flex items-center gap-1">
              <span data-lucide="layers" class="w-4 h-4"></span><span>Data&nbsp;Analysis</span>
            </span>
            <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-xs flex items-center gap-1">
              <span data-lucide="terminal" class="w-4 h-4"></span><span>Machine Learning</span>
            </span>
          </div>
          <a href="resume.html" class="inline-block mt-2 px-4 py-2 rounded-lg bg-accent-DEFAULT text-white hover:bg-accent-light transition-colors">View Resume</a>
        </div>
      </div>
    </section>

    <!-- About Section -->
    <section id="about" class="space-y-16">
      <h2 class="text-3xl font-bold text-center mb-8">About Me</h2>
      <!-- Overview -->
      <div class="p-6 bg-gray-100 dark:bg-gray-800 rounded-lg shadow-md space-y-2">
        <h3 class="text-2xl font-semibold mb-3 text-accent-DEFAULT">Overview</h3>
        <ul class="list-disc list-inside space-y-2 text-sm md:text-base">
          <li>Studying Computer Science &amp; Applied Mathematics at the University of Maryland (Class&nbsp;of&nbsp;2025)</li>
          <li>Researching topological data analysis &amp; geometric deep learning to detect regime shifts in high‑frequency financial markets</li>
          <li>Currently building scalable systems in quantitative finance, logistics optimisation &amp; AI‑driven games</li>
        </ul>
      </div>
      <!-- Interests box -->
      <div class="p-6 bg-gray-100 dark:bg-gray-800 rounded-lg shadow-md">
        <h3 class="font-semibold mb-2 flex items-center">
          <span data-lucide="brain" class="w-5 h-5 mr-2"></span> Interests
        </h3>
        <div class="flex flex-wrap gap-2">
          <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-xs">🏃 Distance&nbsp;Running</span>
          <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-xs">♠️ Poker</span>
          <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-xs">💰 Sports&nbsp;Betting</span>
          <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-xs">🧠 Game&nbsp;Theory</span>
          <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-xs">♟️ Chess</span>
          <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-xs">🇫🇷 French</span>
          <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-xs">🏃‍♂️ Track&nbsp;&amp;&nbsp;Field</span>
          <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-xs">🏊 Triathlon</span>
          <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-xs">🖥️ Machine&nbsp;Learning</span>
          <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-xs">🔬 Research</span>
        </div>
      </div>

      <!-- Running & Training card -->
      <div class="p-6 bg-gray-100 dark:bg-gray-800 rounded-lg shadow-md space-y-6">
        <!-- Added emoji for a playful heading -->
        <h3 class="text-2xl font-semibold text-accent-DEFAULT mb-1 flex items-center"><span class="mr-2">🏃</span>Running &amp; Training</h3>
        <!-- More personal description inviting the reader into my running journey -->
        <p class="text-sm mb-2">Every mile tells a story – here's a snapshot of my last&nbsp;30&nbsp;days.</p>
        <!-- Decorative illustration for visual interest -->
        <img src="run_art.png" alt="Running illustration" class="w-full h-32 object-cover rounded-lg mb-4" />
        <ul class="list-disc list-inside space-y-1 text-sm mb-4">
          <!-- Include emojis on each line to add personality to my PRs -->
          <li>🥇 Mile PR: <strong>4:44.88</strong> at Outdoor Track &amp; Field Championships</li>
          <li>⏱️ 3200m PR: <strong>10:16.53</strong> at East Region Championships</li>
          <li>🏃‍♂️ 5K PR: <strong>16:44.96</strong> at Zaching for Cancer Running Festival</li>
          <li>🏅 Half Marathon PR: <strong>1:24:01</strong> at Philadelphia Half Marathon</li>
        </ul>
        <div class="grid md:grid-cols-2 gap-4">
          <!-- Monthly summary -->
          <div class="p-4 bg-gray-50 dark:bg-gray-900 border border-accent-DEFAULT rounded-lg dark:border-accent-light space-y-2">
            <div class="flex justify-between items-center mb-2">
              <h4 class="font-semibold">Last&nbsp;30&nbsp;Sessions</h4>
              <!-- Activity filter buttons -->
              <div class="flex gap-2">
                <button class="px-2 py-1 rounded border text-xs hover:bg-accent-DEFAULT hover:text-white" data-filter="all" onclick="setActivityFilter(event)">All</button>
                <button class="px-2 py-1 rounded border text-xs hover:bg-accent-DEFAULT hover:text-white" data-filter="Run" onclick="setActivityFilter(event)">Running</button>
                <button class="px-2 py-1 rounded border text-xs hover:bg-accent-DEFAULT hover:text-white" data-filter="Ride" onclick="setActivityFilter(event)">Biking</button>
                <button class="px-2 py-1 rounded border text-xs hover:bg-accent-DEFAULT hover:text-white" data-filter="Swim" onclick="setActivityFilter(event)">Swimming</button>
              </div>
            </div>
            <p class="text-sm flex items-center"><span data-lucide="map-pin" class="w-4 h-4 mr-2"></span><span id="monthlyDistance" class="font-bold text-accent-DEFAULT">0</span> km total distance</p>
            <p class="text-sm flex items-center"><span data-lucide="clock" class="w-4 h-4 mr-2"></span><span id="monthlyHours" class="font-bold text-accent-DEFAULT">0</span> hours of movement</p>
            <p class="text-sm flex items-center"><span data-lucide="list" class="w-4 h-4 mr-2"></span><span id="monthlyActivities" class="font-bold text-accent-DEFAULT">0</span> sessions</p>
            <p class="text-sm flex items-center"><span data-lucide="flag" class="w-4 h-4 mr-2"></span>Longest: <span id="monthlyLongest" class="font-bold text-accent-DEFAULT">0</span> km</p>
          </div>
          <!-- Weekly bar chart -->
          <div class="p-4 bg-gray-50 dark:bg-gray-900 border border-accent-DEFAULT rounded-lg dark:border-accent-light space-y-2">
            <h4 class="font-semibold mb-2">Weekly Training</h4>
            <div class="w-full h-32">
              <canvas id="weeklyChart"></canvas>
            </div>
            <p class="text-xs mt-1">Best distance week: <span id="bestDistanceWeek" class="font-bold text-accent-DEFAULT">0</span> mi</p>
          </div>
        </div>
        <!-- Recent activities list -->
          <div class="p-4 bg-gray-50 dark:bg-gray-900 border border-accent-DEFAULT rounded-lg dark:border-accent-light space-y-2 overflow-y-auto h-40">
          <h4 class="font-semibold mb-2">Recent Activities</h4>
          <ul id="recentActivities" class="space-y-1 text-sm"></ul>
        </div>
      </div>

      <!-- Poker card -->
      <div class="p-6 bg-gray-100 dark:bg-gray-800 rounded-lg shadow-md space-y-2">
        <!-- Add card suit emoji for flair -->
        <h3 class="text-2xl font-semibold mb-2 text-accent-DEFAULT flex items-center"><span class="mr-2">♠️</span>Poker</h3>
        <!-- Decorative illustration for the Poker card -->
        <img src="poker_art.png" alt="Poker illustration" class="w-full h-32 object-cover rounded-lg mb-2" />
        <!-- Improved caption telling a richer story without adding length -->
        <p class="mb-2 text-sm">My EV curve tells the story of disciplined play — balancing risk and reward through GTO play and bankroll management.</p>
        <div class="w-full h-56">
          <canvas id="pokerChart"></canvas>
        </div>
        <div class="flex justify-center space-x-2 mt-2 text-sm">
          <button class="p-1 px-2 border rounded hover:bg-accent-DEFAULT hover:text-white" data-range="30" onclick="updatePokerRange(event)">1M</button>
          <button class="p-1 px-2 border rounded hover:bg-accent-DEFAULT hover:text-white" data-range="90" onclick="updatePokerRange(event)">3M</button>
          <button class="p-1 px-2 border rounded hover:bg-accent-DEFAULT hover:text-white" data-range="365" onclick="updatePokerRange(event)">1Y</button>
          <button class="p-1 px-2 border rounded hover:bg-accent-DEFAULT hover:text-white" data-range="0" onclick="updatePokerRange(event)">All</button>
        </div>
        <small class="text-xs text-gray-600 dark:text-gray-400">~12 BB/hour</small>
      </div>

      <!-- Plus-EV Sports betting card -->
      <div class="p-6 bg-gray-100 dark:bg-gray-800 rounded-lg shadow-md space-y-2">
        <h3 class="text-2xl font-semibold mb-2 text-accent-DEFAULT flex items-center"><span class="mr-2">📈</span>Plus‑EV&nbsp;Sports&nbsp;Betting</h3>
        <!-- Decorative illustration for the sports betting card -->
        <img src="sports_art.png" alt="Sports betting illustration" class="w-full h-32 object-cover rounded-lg mb-2" />
        <!-- Revised caption: emphasise the interplay of data and discipline -->
        <p class="mb-2 text-sm">Applying math and discipline to find edges in sports markets — small gains add up over time amid natural swings.</p>
        <div class="w-full h-56">
          <canvas id="sportsChart"></canvas>
        </div>
        <div class="flex justify-center space-x-2 mt-2 text-sm">
          <button class="p-1 px-2 border rounded hover:bg-accent-DEFAULT hover:text-white" data-range="30" onclick="updateSportsRange(event)">1M</button>
          <button class="p-1 px-2 border rounded hover:bg-accent-DEFAULT hover:text-white" data-range="90" onclick="updateSportsRange(event)">3M</button>
          <button class="p-1 px-2 border rounded hover:bg-accent-DEFAULT hover:text-white" data-range="365" onclick="updateSportsRange(event)">1Y</button>
          <button class="p-1 px-2 border rounded hover:bg-accent-DEFAULT hover:text-white" data-range="0" onclick="updateSportsRange(event)">All</button>
        </div>
        <small class="text-xs text-gray-600 dark:text-gray-400">~6.2% EV per bet</small>
      </div>
    </section>

    <!-- Education Section -->
    <section id="education" class="space-y-6 p-6 bg-gray-50 dark:bg-gray-900 rounded-lg shadow-md">
      <h2 class="text-3xl font-bold text-center mb-6">Education</h2>
      <div class="space-y-4">
        <div class="p-6 bg-gray-100 dark:bg-gray-800 border border-accent-DEFAULT rounded-lg dark:border-accent-light">
          <h3 class="text-2xl font-semibold text-accent-DEFAULT">University of Maryland, College Park</h3>
          <p class="italic text-sm mb-1">B.S. Computer Science (Machine Learning), Applied Mathematics</p>
          <p class="text-sm mb-2">GPA: 3.51 • Dean’s List</p>
          <p class="text-sm">Relevant Coursework: Data Structures & Algorithms, Object-Oriented Programming, Information Systems, Database Design, Multivariate Calculus, Linear Algebra, Advanced Statistics, Differential Equations, Computer Systems, Real Analysis, Data Science.</p>
        </div>
        <!-- Add high school if desired in future -->
      </div>
    </section>

    <!-- Experience Section -->
    <section id="experience" class="space-y-6 p-6 bg-gray-50 dark:bg-gray-900 rounded-lg shadow-md">
      <h2 class="text-3xl font-bold text-center mb-6">Experience</h2>
      <div class="space-y-6">
        <!-- Ivoyant experience -->
        <div class="p-6 bg-gray-100 dark:bg-gray-800 border border-accent-DEFAULT rounded-lg dark:border-accent-light flex flex-col md:flex-row md:items-start md:space-x-4">
          <div class="flex-shrink-0 mb-4 md:mb-0 md:mr-4">
            <!-- Official Ivoyant logo using SVG downloaded from their site. If this image fails to load, it will degrade gracefully due to the defined dimensions. -->
            <img src="ivoyant.svg" alt="Ivoyant Logo" class="w-16 h-16 object-contain rounded" />
          </div>
          <div>
            <h3 class="text-xl font-semibold">Software Engineering Intern – Ivoyant</h3>
            <p class="text-sm italic mb-2">Atlanta, GA • Summer 2025</p>
            <ul class="list-disc list-inside space-y-1 text-sm">
              <li>Designed and deployed RESTful APIs using Java and SQL for Data Mapper, an AI-driven data conversion platform, reducing data retrieval latency by 40%.</li>
              <li>Migrated legacy infrastructure to Azure App Services and Azure Functions, building microservices to enhance scalability and improve deployment speed by 35%.</li>
              <li>Implemented Agile workflows and CI/CD automation with Jenkins and Azure DevOps Server, improving system reliability and speeding up release cycles.</li>
            </ul>
          </div>
        </div>
        <!-- UMD experience -->
        <div class="p-6 bg-gray-100 dark:bg-gray-800 border border-accent-DEFAULT rounded-lg dark:border-accent-light flex flex-col md:flex-row md:items-start md:space-x-4">
          <div class="flex-shrink-0 mb-4 md:mb-0 md:mr-4">
            <!-- UMD logo resides at the repository root (GitHub Pages flattens directories) -->
            <img src="umd.png" alt="UMD Logo" class="w-16 h-16 object-contain rounded" />
          </div>
          <div>
            <h3 class="text-xl font-semibold">AI Research Intern – University of Maryland</h3>
            <p class="text-sm italic mb-2">College Park, MD</p>
            <ul class="list-disc list-inside space-y-1 text-sm">
              <li>Collaborated with professors and PhD researchers to build ML-based simulators in PyTorch and BioPython, accelerating multi-scale cell growth modeling by 10× versus traditional PDE methods.</li>
              <li>Developed spatiotemporal models using ConvLSTM and graph neural networks to simulate nutrient diffusion, mitosis, and intercellular signaling with PyTorch and OpenMM.</li>
            </ul>
          </div>
        </div>
        <!-- Other work: Amateur Poker -->
        <div class="p-6 bg-gray-100 dark:bg-gray-800 border border-accent-DEFAULT rounded-lg dark:border-accent-light">
          <h3 class="text-xl font-semibold">Other Work</h3>
          <div class="mt-2">
            <h4 class="font-semibold mb-1 text-accent-DEFAULT">Amateur Poker (NLHE)</h4>
            <ul class="list-disc list-inside space-y-1 text-sm">
              <li>Applied probabilistic decision making and GTO-informed strategies to live and online cash games.</li>
              <li>Tracked EV and variance across thousands of hands using custom spreadsheets and statistical tools.</li>
              <li>Analyzed selection biases and mental game factors to maintain optimal bankroll management and control tilt.</li>
            </ul>
          </div>
          <!-- Future entries (e.g., Teaching Assistant, clubs) can be added here -->
        </div>
      </div>
    </section>

    <!-- Projects & Research Section -->
    <section id="projects-old" class="space-y-6 hidden">
      <h2 class="text-3xl font-bold text-center mb-6">Projects & Research</h2>
      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Black-Scholes Project -->
        <div class="p-6 border border-accent-DEFAULT rounded-lg dark:border-accent-light flex flex-col justify-between">
          <div>
            <h3 class="text-xl font-semibold text-accent-DEFAULT">Black‑Scholes Options Pricing Model</h3>
            <ul class="list-disc list-inside space-y-1 text-sm my-2">
              <li>Built a Python engine using NumPy & SciPy to compute analytical values for European options, achieving <0.1% deviation from market benchmarks.</li>
              <li>Engineered a vectorized batch-pricing module to value 20,000+ contracts in under 0.5s.</li>
              <li>Implemented CLI and visualization tools for traders to price portfolios efficiently.</li>
            </ul>
            <div class="flex flex-wrap gap-2 mt-2">
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Python</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">NumPy</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">SciPy</span>
            </div>
          </div>
          <a href="https://github.com/halli75/blackscholes_pricer" target="_blank" class="mt-4 inline-block px-3 py-1 bg-accent-DEFAULT text-white rounded hover:bg-accent-light">View Repo</a>
        </div>
        <!-- Last‑Mile Delivery Platform -->
        <div class="p-6 border border-accent-DEFAULT rounded-lg dark:border-accent-light flex flex-col justify-between">
          <div>
            <h3 class="text-xl font-semibold text-accent-DEFAULT">Last‑Mile Delivery Platform</h3>
            <ul class="list-disc list-inside space-y-1 text-sm my-2">
              <li>Developed a microservices-based supply-chain delivery platform with 9 backend services (orders, routing, GPS, driver, customer, etc.) using Java Spring Boot and AWS.</li>
              <li>Implemented secure, event-driven REST APIs with OAuth2, RabbitMQ, Kafka, and Spring Cloud Gateway, achieving <100ms latency.</li>
              <li>Deployed to AWS with Docker Compose and added observability (Micrometer, Prometheus, Jaeger) for 100% uptime under load.</li>
            </ul>
            <div class="flex flex-wrap gap-2 mt-2">
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Java</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Spring Boot</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">AWS</span>
            </div>
          </div>
          <a href="https://github.com/halli75/Last-Mile-Delivery-Platform" target="_blank" class="mt-4 inline-block px-3 py-1 bg-accent-DEFAULT text-white rounded hover:bg-accent-light">View Repo</a>
        </div>
        <!-- AI Blackjack Card Counter -->
        <div class="p-6 border border-accent-DEFAULT rounded-lg dark:border-accent-light flex flex-col justify-between">
          <div>
            <h3 class="text-xl font-semibold text-accent-DEFAULT">AI Blackjack Card Counter</h3>
            <ul class="list-disc list-inside space-y-1 text-sm my-2">
              <li>Created an AI-powered blackjack simulator in Python using TensorFlow and PyTorch to learn optimal play strategies.</li>
              <li>Developed a custom data pipeline to compile game outcomes and support supervised & reinforcement learning.</li>
              <li>Tuned models through hyperparameter optimization and used R for statistical modeling and EV tracking, achieving +2.2% EV/hr in simulations.</li>
            </ul>
            <div class="flex flex-wrap gap-2 mt-2">
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Python</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">TensorFlow</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">PyTorch</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">R</span>
            </div>
          </div>
          <a href="https://github.com/halli75/BlackjackCardCounter" target="_blank" class="mt-4 inline-block px-3 py-1 bg-accent-DEFAULT text-white rounded hover:bg-accent-light">View Repo</a>
        </div>
        <!-- Research Paper 1 -->
        <div class="p-6 border border-accent-DEFAULT rounded-lg dark:border-accent-light flex flex-col justify-between">
          <div>
            <h3 class="text-xl font-semibold text-accent-DEFAULT">NFT Valuation & Global Market Impact</h3>
            <p class="text-sm my-2">A research paper analyzing non-fungible token valuation through financial models (Treynor ratio, Sharpe ratio, Jensen’s alpha) and its ripple effects on global markets. Concludes NFTs will evolve into asset security technology.</p>
            <div class="flex flex-wrap gap-2 mt-2">
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Research</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">NFTs</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Finance</span>
            </div>
          </div>
            <!-- Link directly to the research paper in the repository root since GitHub Pages flattens directory structures -->
            <a href="paper1.pdf" class="mt-4 inline-block px-3 py-1 bg-accent-DEFAULT text-white rounded hover:bg-accent-light" target="_blank">View PDF</a>
        </div>
        <!-- AssetScanner Project -->
        <div class="p-6 border border-accent-DEFAULT rounded-lg dark:border-accent-light flex flex-col justify-between">
          <div>
            <h3 class="text-xl font-semibold text-accent-DEFAULT">AssetScanner</h3>
            <ul class="list-disc list-inside space-y-1 text-sm my-2">
              <li>Built a scanner leveraging stock APIs to filter digital assets using technical indicators and fundamental factors.</li>
              <li>Implemented customizable screening rules and alerting for value opportunities across equities and crypto markets.</li>
              <li>Designed using Python and pandas with modular architecture for rapid strategy experimentation.</li>
            </ul>
            <div class="flex flex-wrap gap-2 mt-2">
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Python</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">pandas</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">APIs</span>
            </div>
          </div>
          <a href="https://github.com/halli75/AssetScanner" target="_blank" class="mt-4 inline-block px-3 py-1 bg-accent-DEFAULT text-white rounded hover:bg-accent-light">View Repo</a>
        </div>
        <!-- Baccarat Simulation -->
        <div class="p-6 border border-accent-DEFAULT rounded-lg dark:border-accent-light flex flex-col justify-between">
          <div>
            <h3 class="text-xl font-semibold text-accent-DEFAULT">Baccarat Simulation</h3>
            <ul class="list-disc list-inside space-y-1 text-sm my-2">
              <li>Developed a Monte Carlo simulator for the baccarat casino game to analyze optimal betting strategies.</li>
              <li>Evaluated expected returns under varying commission structures and banker/player bet distributions.</li>
              <li>Visualized probability distributions and outcomes using matplotlib and seaborn.</li>
            </ul>
            <div class="flex flex-wrap gap-2 mt-2">
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Python</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">NumPy</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Simulation</span>
            </div>
          </div>
          <a href="https://github.com/halli75/baccarat_sim" target="_blank" class="mt-4 inline-block px-3 py-1 bg-accent-DEFAULT text-white rounded hover:bg-accent-light">View Repo</a>
        </div>
      </div>
    </section>

    <!-- Newly designed Projects section -->
    <section id="projects" class="space-y-6 p-6 bg-gray-50 dark:bg-gray-900 rounded-lg shadow-md">
      <h2 class="text-3xl font-bold text-center mb-6">Projects</h2>
      <!-- Top featured projects -->
      <div class="grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Black‑Scholes Options Pricing Model -->
        <div class="p-6 bg-gray-100 dark:bg-gray-800 border border-accent-DEFAULT rounded-lg dark:border-accent-light flex flex-col justify-between">
          <div>
            <h3 class="text-xl font-semibold text-accent-DEFAULT">Black‑Scholes Options Pricing Model</h3>
            <ul class="list-disc list-inside space-y-1 text-sm my-2">
              <li>Developed a Python engine to price European options with &lt;0.1% deviation from market benchmarks.</li>
              <li>Vectorized batch-pricing over 20k+ contracts in under 0.5s.</li>
              <li>Built CLI and visuals for traders to price portfolios efficiently.</li>
            </ul>
            <div class="flex flex-wrap gap-2 mt-2">
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Python</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">NumPy</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">SciPy</span>
            </div>
          </div>
          <a href="https://github.com/halli75/blackscholes_pricer" target="_blank" class="mt-4 inline-block px-3 py-1 bg-accent-DEFAULT text-white rounded hover:bg-accent-light">View Repo</a>
        </div>
        <!-- Last‑Mile Delivery Platform -->
        <div class="p-6 bg-gray-100 dark:bg-gray-800 border border-accent-DEFAULT rounded-lg dark:border-accent-light flex flex-col justify-between">
          <div>
            <h3 class="text-xl font-semibold text-accent-DEFAULT">Last‑Mile Delivery Platform</h3>
            <ul class="list-disc list-inside space-y-1 text-sm my-2">
              <li>Built a microservices supply‑chain platform with 9 back‑end services in Java Spring Boot on AWS.</li>
              <li>Implemented event‑driven REST APIs with OAuth2, RabbitMQ, Kafka and &lt;100&nbsp;ms latency.</li>
              <li>Deployed with Docker &amp; added observability (Prometheus, Jaeger) for 100% uptime.</li>
            </ul>
            <div class="flex flex-wrap gap-2 mt-2">
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Java</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Spring Boot</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">AWS</span>
            </div>
          </div>
          <a href="https://github.com/halli75/Last-Mile-Delivery-Platform" target="_blank" class="mt-4 inline-block px-3 py-1 bg-accent-DEFAULT text-white rounded hover:bg-accent-light">View Repo</a>
        </div>
        <!-- AI Blackjack Card Counter -->
        <div class="p-6 bg-gray-100 dark:bg-gray-800 border border-accent-DEFAULT rounded-lg dark:border-accent-light flex flex-col justify-between">
          <div>
            <h3 class="text-xl font-semibold text-accent-DEFAULT">AI Blackjack Card Counter</h3>
            <ul class="list-disc list-inside space-y-1 text-sm my-2">
              <li>Created a blackjack simulator using TensorFlow &amp; PyTorch to learn optimal play.</li>
              <li>Crafted a custom data pipeline for supervised and reinforcement learning.</li>
              <li>Tuned models and tracked EV, achieving +2.2% EV/hr in simulations.</li>
            </ul>
            <div class="flex flex-wrap gap-2 mt-2">
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Python</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">TensorFlow</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">PyTorch</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">R</span>
            </div>
          </div>
          <a href="https://github.com/halli75/BlackjackCardCounter" target="_blank" class="mt-4 inline-block px-3 py-1 bg-accent-DEFAULT text-white rounded hover:bg-accent-light">View Repo</a>
        </div>
      </div>
      <!-- Toggle button to reveal additional projects -->
      <div class="text-center">
        <button id="viewMoreBtn" type="button" class="mt-6 px-4 py-2 rounded-lg border border-accent-DEFAULT text-accent-DEFAULT hover:bg-accent-DEFAULT hover:text-white transition-colors" onclick="toggleMoreProjects()">View More</button>
      </div>
      <!-- Additional projects hidden by default -->
      <div id="moreProjects" class="hidden mt-6 grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Infectious Diseases Database -->
        <div class="p-6 bg-gray-100 dark:bg-gray-800 border border-accent-DEFAULT rounded-lg dark:border-accent-light flex flex-col justify-between">
          <div>
            <h3 class="text-xl font-semibold text-accent-DEFAULT">Infectious Diseases Database</h3>
            <ul class="list-disc list-inside space-y-1 text-sm my-2">
              <li>Built a relational database to store and query infectious disease records.</li>
              <li>Populated tables via insert scripts and wrote SQL queries to practice joins and aggregates.</li>
              <li>Integrated a Java program to perform CRUD operations and demonstrate database interaction.</li>
            </ul>
            <div class="flex flex-wrap gap-2 mt-2">
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">SQL</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Java</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Database</span>
            </div>
          </div>
          <a href="https://github.com/halli75/infectious_diseases" target="_blank" class="mt-4 inline-block px-3 py-1 bg-accent-DEFAULT text-white rounded hover:bg-accent-light">View Repo</a>
        </div>
        <!-- Special Relativity Physics Engine -->
        <div class="p-6 bg-gray-100 dark:bg-gray-800 border border-accent-DEFAULT rounded-lg dark:border-accent-light flex flex-col justify-between">
          <div>
            <h3 class="text-xl font-semibold text-accent-DEFAULT">Special Relativity Physics Engine</h3>
            <ul class="list-disc list-inside space-y-1 text-sm my-2">
              <li>Developed an interactive web app that simulates special relativity scenarios in real time.</li>
              <li>Illustrates time dilation, length contraction and simultaneity with intuitive controls to pause, rewind and explore.</li>
              <li>Built with vanilla HTML, CSS &amp; JavaScript for accessibility and performance.</li>
            </ul>
            <div class="flex flex-wrap gap-2 mt-2">
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">JavaScript</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">HTML</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Education</span>
            </div>
          </div>
          <a href="https://github.com/halli75/physicsengine" target="_blank" class="mt-4 inline-block px-3 py-1 bg-accent-DEFAULT text-white rounded hover:bg-accent-light">View Repo</a>
        </div>
        <!-- Gowda Poker Room -->
        <div class="p-6 bg-gray-100 dark:bg-gray-800 border border-accent-DEFAULT rounded-lg dark:border-accent-light flex flex-col justify-between">
          <div>
            <h3 class="text-xl font-semibold text-accent-DEFAULT">Gowda Poker Room</h3>
            <ul class="list-disc list-inside space-y-1 text-sm my-2">
              <li>Zero‑backend poker leaderboard for home games – runs fully in the browser.</li>
              <li>Allows admins to create sessions, add players, and record buy‑ins and cash‑outs via an intuitive UI.</li>
              <li>Data persists in localStorage; no logins or server setup required.</li>
            </ul>
            <div class="flex flex-wrap gap-2 mt-2">
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">JavaScript</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Web</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Gaming</span>
            </div>
          </div>
          <a href="https://github.com/halli75/gowda-poker-room" target="_blank" class="mt-4 inline-block px-3 py-1 bg-accent-DEFAULT text-white rounded hover:bg-accent-light">View Repo</a>
        </div>
      </div>
    </section>

    <!-- Research Section -->
    <section id="research" class="space-y-6 p-6 bg-gray-50 dark:bg-gray-900 rounded-lg shadow-md">
      <h2 class="text-3xl font-bold text-center mb-6">Research</h2>
      <div class="grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- NFT Research Paper -->
        <div class="p-6 bg-gray-100 dark:bg-gray-800 border border-accent-DEFAULT rounded-lg dark:border-accent-light flex flex-col justify-between">
          <div>
            <h3 class="text-xl font-semibold text-accent-DEFAULT">NFT Valuation &amp; Global Market Impact (2022)</h3>
            <ul class="list-disc list-inside space-y-1 text-sm my-2">
              <li>Examined NFT prices using financial metrics like Treynor ratio and Sharpe ratio.</li>
              <li>Explored how NFT markets ripple into broader financial ecosystems.</li>
              <li>Posits that NFTs may evolve into a new class of asset‑backed securities.</li>
            </ul>
            <div class="flex flex-wrap gap-2 mt-2">
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Research</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">NFTs</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Finance</span>
            </div>
          </div>
          <a href="paper1.pdf" class="mt-4 inline-block px-3 py-1 bg-accent-DEFAULT text-white rounded hover:bg-accent-light" target="_blank">View PDF</a>
        </div>
        <!-- Hybrid DL & NLP Cybersecurity Paper -->
        <div class="p-6 bg-gray-100 dark:bg-gray-800 border border-accent-DEFAULT rounded-lg dark:border-accent-light flex flex-col justify-between">
          <div>
            <h3 class="text-xl font-semibold text-accent-DEFAULT">Hybrid DL &amp; NLP Cybersecurity for Small Businesses (2023-2024)</h3>
            <ul class="list-disc list-inside space-y-1 text-sm my-2">
              <li>Proposes a cloud‑based cybersecurity system combining deep learning and natural language processing.</li>
              <li>Aims to democratise affordable AI‑driven intrusion detection for small businesses.</li>
              <li>Highlights the importance of accessible threat classification in an evolving digital landscape.</li>
            </ul>
            <div class="flex flex-wrap gap-2 mt-2">
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Research</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Cybersecurity</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">NLP</span>
            </div>
          </div>
          <button disabled class="mt-4 inline-block px-3 py-1 bg-gray-400 text-gray-800 dark:bg-gray-700 dark:text-gray-400 rounded cursor-not-allowed">View PDF Coming Soon</button>
        </div>
        <!-- TDA & Geometric DL for Regime Shifts -->
        <div class="p-6 bg-gray-100 dark:bg-gray-800 border border-accent-DEFAULT rounded-lg dark:border-accent-light flex flex-col justify-between">
          <div>
            <h3 class="text-xl font-semibold text-accent-DEFAULT flex items-center">TDA &amp; Geometric DL for Market Regime Shifts (2025) <span class="ml-2 text-xs px-2 py-0.5 rounded bg-yellow-300/30 text-yellow-800 dark:bg-yellow-500/20 dark:text-yellow-200">WIP</span></h3>
            <ul class="list-disc list-inside space-y-1 text-sm my-2">
              <li>Combines topological data analysis and geometric deep learning to detect market regime changes.</li>
              <li>Investigates how subtle shifts in market topology signal transitions between bullish, bearish or chaotic states.</li>
              <li>Work in progress exploring cutting‑edge methods for high‑frequency financial data.</li>
            </ul>
            <div class="flex flex-wrap gap-2 mt-2">
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Research</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">TDA</span>
              <span class="text-xs bg-accent-DEFAULT/20 text-accent-DEFAULT px-2 py-1 rounded">Geometric DL</span>
            </div>
          </div>
          <span class="mt-4 inline-block px-3 py-1 bg-yellow-300/30 text-yellow-800 dark:bg-yellow-500/20 dark:text-yellow-200 rounded">In Progress</span>
        </div>
      </div>
    </section>

    <!-- Skills Section -->
    <section id="skills" class="space-y-6 p-6 bg-gray-50 dark:bg-gray-900 rounded-lg shadow-md">
      <h2 class="text-3xl font-bold text-center mb-6">Skills</h2>
      <div class="flex flex-wrap justify-center gap-3">
        <!-- Languages -->
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">Java</span>
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">Python</span>
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">C++</span>
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">JavaScript</span>
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">SQL</span>
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">R</span>
        <!-- Frameworks -->
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">Spring Boot</span>
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">Node.js</span>
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">React</span>
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">TensorFlow</span>
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">PyTorch</span>
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">NumPy/SciPy</span>
        <!-- Tools & DevOps -->
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">Azure</span>
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">AWS</span>
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">Docker</span>
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">Kubernetes</span>
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">Jenkins</span>
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">Git</span>
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">RabbitMQ/Kafka</span>
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">OpenMM</span>
        <span class="px-3 py-1 rounded bg-accent-DEFAULT/20 text-accent-DEFAULT text-sm">Prometheus/Jaeger</span>
      </div>
    </section>

    <!-- Contact Section -->
    <!-- Contact section removed by user request -->
  </main>

  <!-- Scripts -->
  <script>
    // Dark/light mode toggle and persistence
    const htmlEl = document.documentElement;
    const themeToggleBtn = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');
    function setDarkMode(isDark) {
      if (isDark) {
        htmlEl.classList.add('dark');
        themeIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m8.485-12.485l-.707.707M4.222 19.778l-.707.707M21 12h-1M4 12H3m15.071 7.071l-.707-.707M5.636 5.636l-.707-.707" />';
      } else {
        htmlEl.classList.remove('dark');
        themeIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" />';
      }
    }
    function toggleTheme() {
      const isDark = htmlEl.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      setDarkMode(isDark);
    }
    themeToggleBtn.addEventListener('click', toggleTheme);
    // Initialize theme from storage or system preference
    (function() {
      const stored = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const isDark = stored ? stored === 'dark' : prefersDark;
      setDarkMode(isDark);
    })();

    // Mobile menu toggle
    const menuBtn = document.getElementById('menuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    function toggleMenu() {
      mobileMenu.classList.toggle('hidden');
    }
    menuBtn.addEventListener('click', toggleMenu);

    // Data arrays for charts and activities
    let pokerData = [];
    let sportsData = [];
    let activities = [];
    let currentActivityFilter = 'all';

    // Fetch poker CSV from published Google Sheet and parse
    async function loadPokerData() {
      const csvUrl = 'https://docs.google.com/spreadsheets/d/1dpwwxn2avkUzymx83_BfbRH2NsWpwYnoeW_-Otkpi_A/export?format=csv';
      try {
        const resp = await fetch(csvUrl);
        const text = await resp.text();
        const rows = text.trim().split('\n');
        const headers = rows[0].split(',');
        const dateIdx = headers.indexOf('Date');
        const plIdx = headers.indexOf('P/L');
        let cumulative = 0;
        pokerData = [];
        for (let i = 1; i < rows.length; i++) {
          const cols = rows[i].split(',');
          if (!cols[dateIdx]) continue;
          const date = new Date(cols[dateIdx]);
          const pl = parseFloat(cols[plIdx] || 0);
          if (!isNaN(pl)) {
            cumulative += pl;
            pokerData.push({ date: date, value: cumulative });
          }
        }
      } catch (err) {
        console.error('Error loading poker data:', err);
      }
    }

    // Precomputed sports betting EV data for the past 12 months (synthetic with downswings and ~7% EV per bet).
    // This dataset is generated in advance so that the chart renders correctly even when the site is viewed from a local
    // file system (browsers block fetch calls on file://). Each entry has a date (YYYY-MM-DD) and cumulative EV value.
    const sportsDataRaw = [{date: '2024-09-14', value: 0.00},{date: '2024-09-15', value: 2.28},{date: '2024-09-16', value: 2.28},{date: '2024-09-17', value: 2.28},{date: '2024-09-18', value: 6.04},{date: '2024-09-19', value: 6.04},{date: '2024-09-20', value: 6.04},{date: '2024-09-21', value: 8.92},{date: '2024-09-22', value: 8.92},{date: '2024-09-23', value: 10.10},{date: '2024-09-24', value: 10.10},{date: '2024-09-25', value: 17.73},{date: '2024-09-26', value: 17.73},{date: '2024-09-27', value: 17.73},{date: '2024-09-28', value: 17.73},{date: '2024-09-29', value: 17.73},{date: '2024-09-30', value: 25.27},{date: '2024-10-01', value: 30.76},{date: '2024-10-02', value: 30.76},{date: '2024-10-03', value: 37.99},{date: '2024-10-04', value: 37.99},{date: '2024-10-05', value: 38.73},{date: '2024-10-06', value: 38.73},{date: '2024-10-07', value: 46.06},{date: '2024-10-08', value: 46.06},{date: '2024-10-09', value: 46.06},{date: '2024-10-10', value: 46.06},{date: '2024-10-11', value: 46.06},{date: '2024-10-12', value: 59.96},{date: '2024-10-13', value: 59.96},{date: '2024-10-14', value: 59.96},{date: '2024-10-15', value: 61.23},{date: '2024-10-16', value: 61.23},{date: '2024-10-17', value: 61.23},{date: '2024-10-18', value: 61.23},{date: '2024-10-19', value: 61.23},{date: '2024-10-20', value: 61.23},{date: '2024-10-21', value: 61.23},{date: '2024-10-22', value: 61.23},{date: '2024-10-23', value: 61.23},{date: '2024-10-24', value: 68.45},{date: '2024-10-25', value: 68.45},{date: '2024-10-26', value: 68.45},{date: '2024-10-27', value: 68.45},{date: '2024-10-28', value: 68.45},{date: '2024-10-29', value: 68.45},{date: '2024-10-30', value: 72.31},{date: '2024-10-31', value: 72.31},{date: '2024-11-01', value: 71.78},{date: '2024-11-02', value: 71.29},{date: '2024-11-03', value: 68.68},{date: '2024-11-04', value: 68.68},{date: '2024-11-05', value: 66.00},{date: '2024-11-06', value: 66.00},{date: '2024-11-07', value: 66.00},{date: '2024-11-08', value: 61.03},{date: '2024-11-09', value: 61.03},{date: '2024-11-10', value: 61.03},{date: '2024-11-11', value: 61.03},{date: '2024-11-12', value: 57.56},{date: '2024-11-13', value: 56.64},{date: '2024-11-14', value: 55.62},{date: '2024-11-15', value: 53.08},{date: '2024-11-16', value: 53.08},{date: '2024-11-17', value: 53.08},{date: '2024-11-18', value: 52.19},{date: '2024-11-19', value: 52.19},{date: '2024-11-20', value: 52.19},{date: '2024-11-21', value: 52.19},{date: '2024-11-22', value: 52.19},{date: '2024-11-23', value: 52.19},{date: '2024-11-24', value: 48.38},{date: '2024-11-25', value: 48.38},{date: '2024-11-26', value: 44.77},{date: '2024-11-27', value: 44.77},{date: '2024-11-28', value: 43.34},{date: '2024-11-29', value: 43.34},{date: '2024-11-30', value: 43.34},{date: '2024-12-01', value: 44.62},{date: '2024-12-02', value: 44.62},{date: '2024-12-03', value: 58.80},{date: '2024-12-04', value: 64.51},{date: '2024-12-05', value: 64.51},{date: '2024-12-06', value: 64.51},{date: '2024-12-07', value: 64.51},{date: '2024-12-08', value: 64.51},{date: '2024-12-09', value: 64.51},{date: '2024-12-10', value: 71.43},{date: '2024-12-11', value: 71.43},{date: '2024-12-12', value: 71.43},{date: '2024-12-13', value: 71.43},{date: '2024-12-14', value: 74.84},{date: '2024-12-15', value: 88.30},{date: '2024-12-16', value: 88.30},{date: '2024-12-17', value: 88.30},{date: '2024-12-18', value: 88.30},{date: '2024-12-19', value: 90.88},{date: '2024-12-20', value: 94.04},{date: '2024-12-21', value: 94.04},{date: '2024-12-22', value: 94.04},{date: '2024-12-23', value: 94.04},{date: '2024-12-24', value: 100.09},{date: '2024-12-25', value: 100.09},{date: '2024-12-26', value: 100.09},{date: '2024-12-27', value: 100.09},{date: '2024-12-28', value: 100.09},{date: '2024-12-29', value: 100.09},{date: '2024-12-30', value: 100.09},{date: '2024-12-31', value: 100.09},{date: '2025-01-01', value: 105.90},{date: '2025-01-02', value: 105.90},{date: '2025-01-03', value: 112.10},{date: '2025-01-04', value: 112.10},{date: '2025-01-05', value: 112.10},{date: '2025-01-06', value: 112.10},{date: '2025-01-07', value: 112.10},{date: '2025-01-08', value: 120.70},{date: '2025-01-09', value: 120.70},{date: '2025-01-10', value: 120.70},{date: '2025-01-11', value: 120.70},{date: '2025-01-12', value: 120.70},{date: '2025-01-13', value: 122.89},{date: '2025-01-14', value: 122.89},{date: '2025-01-15', value: 122.89},{date: '2025-01-16', value: 125.92},{date: '2025-01-17', value: 126.74},{date: '2025-01-18', value: 126.74},{date: '2025-01-19', value: 137.03},{date: '2025-01-20', value: 137.03},{date: '2025-01-21', value: 141.03},{date: '2025-01-22', value: 155.08},{date: '2025-01-23', value: 155.08},{date: '2025-01-24', value: 155.08},{date: '2025-01-25', value: 155.08},{date: '2025-01-26', value: 156.25},{date: '2025-01-27', value: 156.25},{date: '2025-01-28', value: 156.25},{date: '2025-01-29', value: 158.54},{date: '2025-01-30', value: 158.54},{date: '2025-01-31', value: 158.54},{date: '2025-02-01', value: 148.15},{date: '2025-02-02', value: 148.15},{date: '2025-02-03', value: 148.15},{date: '2025-02-04', value: 148.15},{date: '2025-02-05', value: 148.15},{date: '2025-02-06', value: 148.15},{date: '2025-02-07', value: 148.15},{date: '2025-02-08', value: 146.07},{date: '2025-02-09', value: 140.37},{date: '2025-02-10', value: 135.83},{date: '2025-02-11', value: 135.83},{date: '2025-02-12', value: 135.83},{date: '2025-02-13', value: 135.83},{date: '2025-02-14', value: 134.74},{date: '2025-02-15', value: 130.98},{date: '2025-02-16', value: 127.33},{date: '2025-02-17', value: 127.33},{date: '2025-02-18', value: 127.33},{date: '2025-02-19', value: 127.33},{date: '2025-02-20', value: 127.33},{date: '2025-02-21', value: 122.17},{date: '2025-02-22', value: 122.17},{date: '2025-02-23', value: 117.08},{date: '2025-02-24', value: 117.08},{date: '2025-02-25', value: 117.08},{date: '2025-02-26', value: 117.08},{date: '2025-02-27', value: 115.11},{date: '2025-02-28', value: 110.72},{date: '2025-03-01', value: 118.90},{date: '2025-03-02', value: 118.90},{date: '2025-03-03', value: 129.15},{date: '2025-03-04', value: 129.15},{date: '2025-03-05', value: 129.15},{date: '2025-03-06', value: 129.15},{date: '2025-03-07', value: 129.15},{date: '2025-03-08', value: 129.15},{date: '2025-03-09', value: 130.53},{date: '2025-03-10', value: 141.47},{date: '2025-03-11', value: 145.78},{date: '2025-03-12', value: 145.78},{date: '2025-03-13', value: 145.78},{date: '2025-03-14', value: 145.78},{date: '2025-03-15', value: 145.78},{date: '2025-03-16', value: 145.78},{date: '2025-03-17', value: 145.78},{date: '2025-03-18', value: 145.78},{date: '2025-03-19', value: 149.07},{date: '2025-03-20', value: 149.07},{date: '2025-03-21', value: 150.37},{date: '2025-03-22', value: 150.37},{date: '2025-03-23', value: 150.37},{date: '2025-03-24', value: 150.37},{date: '2025-03-25', value: 150.37},{date: '2025-03-26', value: 150.37},{date: '2025-03-27', value: 158.18},{date: '2025-03-28', value: 158.18},{date: '2025-03-29', value: 158.18},{date: '2025-03-30', value: 158.18},{date: '2025-03-31', value: 158.18},{date: '2025-04-01', value: 158.18},{date: '2025-04-02', value: 158.18},{date: '2025-04-03', value: 158.18},{date: '2025-04-04', value: 158.18},{date: '2025-04-05', value: 158.18},{date: '2025-04-06', value: 169.32},{date: '2025-04-07', value: 174.41},{date: '2025-04-08', value: 174.41},{date: '2025-04-09', value: 174.41},{date: '2025-04-10', value: 179.48},{date: '2025-04-11', value: 179.48},{date: '2025-04-12', value: 180.71},{date: '2025-04-13', value: 180.71},{date: '2025-04-14', value: 180.71},{date: '2025-04-15', value: 180.71},{date: '2025-04-16', value: 185.87},{date: '2025-04-17', value: 185.87},{date: '2025-04-18', value: 185.87},{date: '2025-04-19', value: 185.87},{date: '2025-04-20', value: 193.74},{date: '2025-04-21', value: 193.74},{date: '2025-04-22', value: 193.74},{date: '2025-04-23', value: 193.74},{date: '2025-04-24', value: 193.74},{date: '2025-04-25', value: 193.74},{date: '2025-04-26', value: 195.62},{date: '2025-04-27', value: 195.62},{date: '2025-04-28', value: 205.42},{date: '2025-04-29', value: 205.42},{date: '2025-04-30', value: 205.42},{date: '2025-05-01', value: 205.42},{date: '2025-05-02', value: 205.42},{date: '2025-05-03', value: 205.42},{date: '2025-05-04', value: 205.42},{date: '2025-05-05', value: 214.02},{date: '2025-05-06', value: 214.02},{date: '2025-05-07', value: 214.02},{date: '2025-05-08', value: 214.02},{date: '2025-05-09', value: 214.02},{date: '2025-05-10', value: 215.98},{date: '2025-05-11', value: 215.98},{date: '2025-05-12', value: 215.98},{date: '2025-05-13', value: 215.98},{date: '2025-05-14', value: 215.98},{date: '2025-05-15', value: 221.86},{date: '2025-05-16', value: 227.91},{date: '2025-05-17', value: 227.91},{date: '2025-05-18', value: 227.91},{date: '2025-05-19', value: 227.91},{date: '2025-05-20', value: 227.91},{date: '2025-05-21', value: 227.91},{date: '2025-05-22', value: 227.91},{date: '2025-05-23', value: 227.91},{date: '2025-05-24', value: 231.77},{date: '2025-05-25', value: 231.77},{date: '2025-05-26', value: 231.77},{date: '2025-05-27', value: 234.46},{date: '2025-05-28', value: 234.46},{date: '2025-05-29', value: 234.46},{date: '2025-05-30', value: 234.46},{date: '2025-05-31', value: 234.46},{date: '2025-06-01', value: 234.46},{date: '2025-06-02', value: 234.46},{date: '2025-06-03', value: 237.29},{date: '2025-06-04', value: 237.29},{date: '2025-06-05', value: 241.56},{date: '2025-06-06', value: 244.67},{date: '2025-06-07', value: 244.67},{date: '2025-06-08', value: 244.67},{date: '2025-06-09', value: 244.67},{date: '2025-06-10', value: 244.67},{date: '2025-06-11', value: 244.67},{date: '2025-06-12', value: 248.95},{date: '2025-06-13', value: 248.95},{date: '2025-06-14', value: 248.95},{date: '2025-06-15', value: 248.95},{date: '2025-06-16', value: 251.93},{date: '2025-06-17', value: 251.93},{date: '2025-06-18', value: 251.93},{date: '2025-06-19', value: 258.34},{date: '2025-06-20', value: 258.34},{date: '2025-06-21', value: 258.34},{date: '2025-06-22', value: 258.34},{date: '2025-06-23', value: 258.34},{date: '2025-06-24', value: 258.34},{date: '2025-06-25', value: 258.34},{date: '2025-06-26', value: 258.34},{date: '2025-06-27', value: 258.34},{date: '2025-06-28', value: 258.34},{date: '2025-06-29', value: 258.34},{date: '2025-06-30', value: 265.58},{date: '2025-07-01', value: 265.58},{date: '2025-07-02', value: 265.58},{date: '2025-07-03', value: 265.58},{date: '2025-07-04', value: 265.58},{date: '2025-07-05', value: 272.39},{date: '2025-07-06', value: 272.39},{date: '2025-07-07', value: 275.97},{date: '2025-07-08', value: 275.97},{date: '2025-07-09', value: 279.77},{date: '2025-07-10', value: 283.35},{date: '2025-07-11', value: 293.23},{date: '2025-07-12', value: 293.23},{date: '2025-07-13', value: 298.97},{date: '2025-07-14', value: 300.94},{date: '2025-07-15', value: 300.94},{date: '2025-07-16', value: 300.94},{date: '2025-07-17', value: 307.46},{date: '2025-07-18', value: 307.46},{date: '2025-07-19', value: 307.46},{date: '2025-07-20', value: 315.32},{date: '2025-07-21', value: 319.74},{date: '2025-07-22', value: 319.74},{date: '2025-07-23', value: 330.78},{date: '2025-07-24', value: 330.78},{date: '2025-07-25', value: 335.36},{date: '2025-07-26', value: 344.03},{date: '2025-07-27', value: 345.13},{date: '2025-07-28', value: 345.13},{date: '2025-07-29', value: 345.13},{date: '2025-07-30', value: 345.13},{date: '2025-07-31', value: 345.13},{date: '2025-08-01', value: 345.13},{date: '2025-08-02', value: 345.13},{date: '2025-08-03', value: 345.13},{date: '2025-08-04', value: 345.13},{date: '2025-08-05', value: 345.13},{date: '2025-08-06', value: 345.13},{date: '2025-08-07', value: 354.95},{date: '2025-08-08', value: 354.95},{date: '2025-08-09', value: 354.95},{date: '2025-08-10', value: 354.95},{date: '2025-08-11', value: 354.95},{date: '2025-08-12', value: 369.27},{date: '2025-08-13', value: 369.27},{date: '2025-08-14', value: 369.27},{date: '2025-08-15', value: 376.73},{date: '2025-08-16', value: 376.73},{date: '2025-08-17', value: 381.83},{date: '2025-08-18', value: 381.83},{date: '2025-08-19', value: 381.83},{date: '2025-08-20', value: 381.83},{date: '2025-08-21', value: 381.83},{date: '2025-08-22', value: 384.22},{date: '2025-08-23', value: 384.22},{date: '2025-08-24', value: 384.22},{date: '2025-08-25', value: 384.22},{date: '2025-08-26', value: 384.22},{date: '2025-08-27', value: 384.22},{date: '2025-08-28', value: 386.67},{date: '2025-08-29', value: 395.45},{date: '2025-08-30', value: 410.09},{date: '2025-08-31', value: 411.93},{date: '2025-09-01', value: 415.24},{date: '2025-09-02', value: 415.24},{date: '2025-09-03', value: 417.70},{date: '2025-09-04', value: 417.70},{date: '2025-09-05', value: 417.70},{date: '2025-09-06', value: 422.70},{date: '2025-09-07', value: 422.70},{date: '2025-09-08', value: 424.61},{date: '2025-09-09', value: 424.61},{date: '2025-09-10', value: 428.53},{date: '2025-09-11', value: 430.93},{date: '2025-09-12', value: 430.93},{date: '2025-09-13', value: 430.93}];

    // Convert the raw sports data into Date objects and assign to sportsData
    sportsData = sportsDataRaw.map(d => ({ date: new Date(d.date), value: d.value }));

    // Draw a simple line chart on a canvas given a dataset of {date, value}
    function drawLineChart(canvasId, data) {
      const canvas = document.getElementById(canvasId);
      const ctx = canvas.getContext('2d');
      // Set canvas dimensions to parent container
      const parent = canvas.parentElement;
      canvas.width = parent.clientWidth;
      canvas.height = parent.clientHeight;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      if (!data || data.length === 0) {
        // draw placeholder text using accent color
        const accentColor = getComputedStyle(document.documentElement).getPropertyValue('--accent') || '#2563eb';
        ctx.fillStyle = accentColor.trim();
        ctx.font = '14px sans-serif';
        ctx.fillText('No data', 10, canvas.height / 2);
        return;
      }
      const values = data.map(d => d.value);
      const minVal = Math.min(...values);
      const maxVal = Math.max(...values);
      const range = maxVal - minVal || 1;
      const count = data.length;
      const xStep = canvas.width / Math.max(count - 1, 1);
      // Fetch accent colors from CSS variables
      const accentColor = (getComputedStyle(document.documentElement).getPropertyValue('--accent') || '#2563eb').trim();
      const accentLight = (getComputedStyle(document.documentElement).getPropertyValue('--accent-light') || accentColor).trim();
      ctx.lineWidth = 2;
      ctx.beginPath();
      const points = [];
      data.forEach((point, i) => {
        const x = i * xStep;
        const y = canvas.height - ((point.value - minVal) / range) * (canvas.height - 20) - 10;
        points.push({ x, y });
        if (i === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      });
      // Fill area under the line with a gradient for a softer look
      ctx.save();
      const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
      // start with a semi‑transparent accent light colour and fade to nearly transparent
      gradient.addColorStop(0, accentLight + '55');
      gradient.addColorStop(1, accentLight + '05');
      ctx.lineTo(canvas.width, canvas.height);
      ctx.lineTo(0, canvas.height);
      ctx.closePath();
      ctx.fillStyle = gradient;
      ctx.fill();
      ctx.restore();
      // Draw the line itself on top
      ctx.beginPath();
      points.forEach((pt, i) => {
        if (i === 0) ctx.moveTo(pt.x, pt.y);
        else ctx.lineTo(pt.x, pt.y);
      });
      ctx.strokeStyle = accentColor;
      ctx.stroke();
      // Draw small circles at each data point to make the chart more engaging
      ctx.fillStyle = accentColor;
      points.forEach(pt => {
        ctx.beginPath();
        ctx.arc(pt.x, pt.y, 3, 0, 2 * Math.PI);
        ctx.fill();
      });
    }

    // Filter data by range (days from most recent)
    function filterByDays(data, days) {
      if (!days || days <= 0) return data;
      const cutoff = new Date();
      cutoff.setDate(cutoff.getDate() - days);
      return data.filter(d => d.date >= cutoff);
    }

    // Update poker chart with selected range
    function updatePokerRange(evt) {
      const days = parseInt(evt.target.getAttribute('data-range'));
      const filtered = filterByDays(pokerData, days);
      drawLineChart('pokerChart', filtered);
    }
    window.updatePokerRange = updatePokerRange;

    // Update sports chart with selected range
    function updateSportsRange(evt) {
      const days = parseInt(evt.target.getAttribute('data-range'));
      const filtered = filterByDays(sportsData, days);
      drawLineChart('sportsChart', filtered);
    }
    window.updateSportsRange = updateSportsRange;

    // Toggle visibility of additional projects
    function toggleMoreProjects() {
      const more = document.getElementById('moreProjects');
      if (!more) return;
      more.classList.toggle('hidden');
      const btn = document.getElementById('viewMoreBtn');
      if (btn) {
        btn.textContent = more.classList.contains('hidden') ? 'View More' : 'Hide';
      }
    }
    // Expose the toggle function globally so the button can call it when clicked
    window.toggleMoreProjects = toggleMoreProjects;

    /*
     * Parse activities CSV and compute running/training statistics.
     * The CSV is loaded from a file hosted with the site (activities.csv).
     * Each activity includes fields: Activity Date, Activity Type, Elapsed Time (seconds), Distance (km).
     */
    // Split a CSV row by comma, handling quoted fields
    function splitCSVRow(row) {
      const result = [];
      let inQuotes = false;
      let value = '';
      for (let i = 0; i < row.length; i++) {
        const ch = row[i];
        if (ch === '"') {
          inQuotes = !inQuotes;
        } else if (ch === ',' && !inQuotes) {
          result.push(value);
          value = '';
        } else {
          value += ch;
        }
      }
      result.push(value);
      return result;
    }

    // Load activities from CSV
    async function loadActivities() {
      try {
        const resp = await fetch('activities.csv');
        const text = await resp.text();
        const rows = text.trim().split(/\r?\n/);
        if (rows.length <= 1) return;
        const header = splitCSVRow(rows[0]);
        // The Strava export includes two sets of elapsed time and distance columns; we
        // explicitly pick the "Moving Time" (seconds) and the second "Distance" (meters)
        // so that our statistics reflect actual moving activity. We convert meters to km.
        const dateIdx = header.indexOf('Activity Date');
        const typeIdx = header.indexOf('Activity Type');
        const movingIdx = header.indexOf('Moving Time');
        let distIdx = -1;
        // Find the second occurrence of "Distance" in the header (the first is index 6,
        // the second is index 17) to ensure we select the value in meters.
        let count = 0;
        for (let i = 0; i < header.length; i++) {
          if (header[i] === 'Distance') {
            count++;
            if (count === 2) {
              distIdx = i;
              break;
            }
          }
        }
        activities = [];
        for (let i = 1; i < rows.length; i++) {
          const cols = splitCSVRow(rows[i]);
          let dateStr = cols[dateIdx] || '';
          // Remove quotes and trim whitespace
          dateStr = dateStr.replace(/"/g, '').trim();
          const type = (cols[typeIdx] || '').replace(/"/g, '').trim();
          const movingSec = parseFloat(cols[movingIdx] || 0);
          const distMeters = parseFloat(cols[distIdx] || 0);
          if (!dateStr) continue;
          const date = new Date(dateStr);
          const distance = isNaN(distMeters) ? 0 : distMeters / 1000.0;
          const elapsed = isNaN(movingSec) ? 0 : movingSec;
          activities.push({ date, type, elapsed, distance });
        }
      } catch (err) {
        console.error('Error loading activities:', err);
      }
    }

    // Set activity filter and update stats
    function setActivityFilter(evt) {
      currentActivityFilter = evt.target.getAttribute('data-filter');
      updateTrainingStats();
    }
    window.setActivityFilter = setActivityFilter;

    // Compute monthly stats (last 30 days) based on filter
    function computeMonthlyStats() {
      const now = new Date();
      const cutoff = new Date(now.getTime());
      cutoff.setDate(cutoff.getDate() - 30);
      let totalDist = 0;
      let totalHours = 0;
      let count = 0;
      let longest = 0;
      activities.forEach(act => {
        if (act.date >= cutoff && (currentActivityFilter === 'all' || act.type === currentActivityFilter)) {
          totalDist += act.distance;
          totalHours += act.elapsed / 3600;
          count += 1;
          if (act.distance > longest) longest = act.distance;
        }
      });
      return { distance: totalDist, hours: totalHours, count: count, longest: longest };
    }

  // ------------------------------------------------------------------------------
  // Helper functions computing statistics from the most recent activities.
  // These functions are defined at the top level so they are accessible
  // outside of computePeak90Stats and other scopes.
  function getRecentActivities(n = 30) {
    // Instead of sorting by date, we want the bottom-most rows from the CSV file.
    // Activities are stored in file order (oldest to newest), so we take the
    // last n entries and then filter by type. This preserves the order of the
    // CSV and matches the requirement to use the bottom-most 30 rows.
    const recentAll = activities.slice(-n);
    return recentAll.filter(act => currentActivityFilter === 'all' || act.type === currentActivityFilter);
  }

  function computeRecentStats(n = 30) {
    const recent = getRecentActivities(n);
    let totalDist = 0;
    let totalHours = 0;
    let longest = 0;
    recent.forEach(act => {
      totalDist += act.distance;
      totalHours += act.elapsed / 3600;
      if (act.distance > longest) longest = act.distance;
    });
    return { distance: totalDist, hours: totalHours, count: recent.length, longest: longest };
  }

  function computeWeeklyStatsRecent(n = 30) {
    const recent = getRecentActivities(n);
    const weeks = {};
    recent.forEach(act => {
      const date = act.date;
      const weekStart = new Date(date);
      const day = weekStart.getDay();
      const diff = (day + 6) % 7;
      weekStart.setDate(weekStart.getDate() - diff);
      weekStart.setHours(0, 0, 0, 0);
      const key = weekStart.toISOString().split('T')[0];
      if (!weeks[key]) {
        weeks[key] = { distance: 0, hours: 0 };
      }
      weeks[key].distance += act.distance;
      weeks[key].hours += act.elapsed / 3600;
    });
    const entries = Object.entries(weeks).map(([k, v]) => ({ week: k, distance: v.distance, hours: v.hours }));
    entries.sort((a, b) => new Date(a.week) - new Date(b.week));
    return entries.slice(-6);
  }


    // Compute weekly stats for last 8 weeks
    function computeWeeklyStats() {
      const weeks = {};
      activities.forEach(act => {
        const date = act.date;
        const weekStart = new Date(date);
        const day = weekStart.getDay();
        const diff = (day + 6) % 7;
        weekStart.setDate(weekStart.getDate() - diff);
        weekStart.setHours(0, 0, 0, 0);
        const key = weekStart.toISOString().split('T')[0];
        if (!weeks[key]) {
          weeks[key] = { distance: 0, hours: 0 };
        }
        if (currentActivityFilter === 'all' || act.type === currentActivityFilter) {
          weeks[key].distance += act.distance;
          weeks[key].hours += act.elapsed / 3600;
        }
      });
      const entries = Object.entries(weeks).map(([k, v]) => ({ week: k, distance: v.distance, hours: v.hours }));
      entries.sort((a, b) => new Date(a.week) - new Date(b.week));
      return entries.slice(-8);
    }

    // Draw bar chart for weekly distances
    function drawBarChart(canvasId, data) {
      const canvas = document.getElementById(canvasId);
      const ctx = canvas.getContext('2d');
      const parent = canvas.parentElement;
      // Determine canvas dimensions. If the parent has no explicit height
      // (which can happen when rendering on GitHub Pages), fall back to
      // sensible defaults so the chart still appears. Without this, the
      // canvas height may be zero, resulting in no visible bars.
      const width = parent && parent.clientWidth ? parent.clientWidth : 300;
      const height = parent && parent.clientHeight ? parent.clientHeight : 150;
      canvas.width = width;
      canvas.height = height;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      if (!data || data.length === 0) {
        const accentColor = getComputedStyle(document.documentElement).getPropertyValue('--accent') || '#2563eb';
        ctx.fillStyle = accentColor.trim();
        ctx.font = '14px sans-serif';
        ctx.fillText('No data', 10, canvas.height / 2);
        return;
      }
      const maxVal = Math.max(...data.map(d => d.distance));
      const barWidth = canvas.width / data.length;
      const accent = (getComputedStyle(document.documentElement).getPropertyValue('--accent') || '#2563eb').trim();
      const accentLight = (getComputedStyle(document.documentElement).getPropertyValue('--accent-light') || accent).trim();
      data.forEach((item, i) => {
        const ratio = data.length > 1 ? i / (data.length - 1) : 0;
        // Compute alpha gradient from 0.5 to 0.9
        const alpha = 0.5 + 0.4 * ratio;
        // Build an 8‑digit hex code with alpha channel. Remove '#' and append alpha as two hex digits.
        let hex = accentLight.replace('#','');
        const a = Math.round(alpha * 255).toString(16).padStart(2, '0');
        const fillColor = '#' + hex + a;
        const x = i * barWidth + barWidth * 0.1;
        const y = canvas.height - ((item.distance / (maxVal || 1)) * (canvas.height - 20)) - 10;
        const h = canvas.height - y - 10;
        const w = barWidth * 0.8;
        // Draw bar with gradient fill
        ctx.fillStyle = fillColor;
        ctx.fillRect(x, y, w, h);
        // Draw numeric label centred above the bar for visual interest
        const label = item.distance.toFixed(1);
        ctx.fillStyle = accent;
        ctx.font = '10px sans-serif';
        const textWidth = ctx.measureText(label).width;
        ctx.fillText(label, x + w / 2 - textWidth / 2, y - 4);
      });
    }

    // Render recent activities
    function renderRecentActivities() {
      const listEl = document.getElementById('recentActivities');
      if (!listEl) return;
      listEl.innerHTML = '';
      // Only use the most recent 30 activities for the recent list as well
      const filtered = getRecentActivities(30);
      const now = new Date();
      filtered.slice(0, 5).forEach(act => {
        const li = document.createElement('li');
        li.className = 'flex justify-between items-center';
        const km = act.distance;
        const mins = Math.round(act.elapsed / 60);
        const diffDays = Math.floor((now - act.date) / (1000 * 3600 * 24));
        let rel = '';
        if (diffDays >= 365) {
          rel = Math.floor(diffDays / 365) + 'y';
        } else if (diffDays >= 30) {
          rel = Math.floor(diffDays / 30) + 'm';
        } else if (diffDays >= 7) {
          rel = Math.floor(diffDays / 7) + 'w';
        } else {
          rel = diffDays + 'd';
        }
        // Choose an appropriate icon based on activity type for extra flair
        let icon = 'activity';
        if (act.type === 'Ride') icon = 'bike';
        else if (act.type === 'Swim') icon = 'swimming';
        const dateStr = act.date.toLocaleDateString(undefined,{month:'short',day:'numeric'});
        // Compose the list item with an icon, date, duration and distance (mi)
        li.innerHTML = `
          <span class="flex items-center gap-2">
            <span data-lucide="${icon}" class="w-4 h-4"></span>
            <span>${dateStr} – ${mins} mins – ${km.toFixed(1)} mi</span>
          </span>
          <span class="text-gray-500 dark:text-gray-400">${rel}</span>
        `;
        listEl.appendChild(li);
      });
      // After injecting new icons, call lucide to replace placeholders with SVGs
      if (window.lucide) {
        lucide.createIcons();
      }
    }

    // Update training stats and charts
    function updateTrainingStats() {
      // Use the most recent 30 activities instead of a sliding 90‑day window.
      const m = computeRecentStats(30);
      const distEl = document.getElementById('monthlyDistance');
      const hrsEl = document.getElementById('monthlyHours');
      const cntEl = document.getElementById('monthlyActivities');
      const longEl = document.getElementById('monthlyLongest');
      if (distEl) distEl.textContent = m.distance.toFixed(1);
      if (hrsEl) hrsEl.textContent = m.hours.toFixed(1);
      if (cntEl) cntEl.textContent = m.count;
      if (longEl) longEl.textContent = m.longest.toFixed(1);
      const weekly = computeWeeklyStatsRecent(30);
      drawBarChart('weeklyChart', weekly);
      let best = 0;
      weekly.forEach(w => { if (w.distance > best) best = w.distance; });
      const bestEl = document.getElementById('bestDistanceWeek');
      if (bestEl) bestEl.textContent = best.toFixed(1);
      renderRecentActivities();
    }

    // Initialize everything on load
    window.addEventListener('DOMContentLoaded', async () => {
      // Load poker data and draw charts
      await loadPokerData();
      drawLineChart('pokerChart', pokerData);
      drawLineChart('sportsChart', sportsData);
      // Load running activities and compute training stats
      await loadActivities();
      updateTrainingStats();
      // Render lucide icons in the interests card
      if (window.lucide && typeof window.lucide.createIcons === 'function') {
        window.lucide.createIcons();
      }
    });
  </script>
</body>
</html>
